/* visit counter Joomla! Plugin
 * 
 * @author Joachim Schmidt - joachim.schmidt@jschmidt-systemberatung.de
 * @copyright Copyright (C) 2013 Joachim Schmidt. All rights reserved.
 * @license http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL
 * 
 * change activity: 
 1`   01.02.2015: Release V2.0.0 for Joomla 3.x
 *    09.08.2022: add geolocation server check
 */ function check_Server(f){switch(f){case 1:var d="http://www.geoplugin.net/json.gp",a=700,b=580;break;case 2:var d="http://ip-api.com/json/",a=400,b=350;break;case 4:var e=document.getElementById("jform_params_server4").value;e.length<32&&(alert("invalid or missing access key "+e),exit);var d="https://ipapi.co/json/?key="+e,a=450,b=580;break;default:alert("server invalid"),exit}var g=screen.width/2-a/2,h=screen.height/2-b/2,c="popup=1,scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,titlebar=no";c=(c=c+",width="+a+",height="+b)+",top="+h+",left="+g,window.open(d,"test",c)}function jsvisit_getHTTPObject(){var a=!1;if(window.XMLHttpRequest)a=new XMLHttpRequest;else if(window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){a=!1}}return a}function jsvisit_setCookie(c,d,b){var a=new Date,e=document.location.hostname;a.setDate(a.getDate()+b);var f=escape(d)+(null==b?"":"; expires="+a.toUTCString())+"; path=/; domain=."+e;document.cookie=c+"="+f}function jsvisit_getCookie(d){var a=document.cookie,b=a.indexOf(" "+d+"=");if(-1==b&&(b=a.indexOf(d+"=")),-1==b)a=null;else{b=a.indexOf("=",b)+1;var c=a.indexOf(";",b);-1==c&&(c=a.length),a=unescape(a.substring(b,c))}return a}function jsvisitCountVisitors(a){var b=jsvisit_getHTTPObject();if(b){b.onreadystatechange=function(){jsvisit_parseResponse(b)};var e=!0;if(a>0){var d=new Date,c=jsvisit_getCookie("visitortime");a=6e4*parseInt(a),d.getTime(),parseInt(c),null!=c&&""!=c&&d.getTime()<parseInt(c)+parseInt(a)&&(e=!1),jsvisit_setCookie("visitortime",value=d.getTime(),31)}if(e){var f="index.php?option=com_ajax&plugin=jsvisit_counter&group=system&format=raw";b.open("POST",f,!0),b.send(null)}}}function jsvisit_parseResponse(a){4==a.readyState&&(200==a.status||304==a.status)&&jsvisit_processReceived(a.responseText)}function jsvisit_processReceived(a){return!1}