"use strict";if("undefined"==typeof akeebabackup)var akeebabackup={};"undefined"==typeof akeebabackup.Extradirs&&(akeebabackup.Extradirs={}),akeebabackup.Extradirs.render=function(a){var b=document.getElementById("ak_list_contents");for(var c in b.innerHTML="",a)if(a.hasOwnProperty(c)){var d=a[c];akeebabackup.Extradirs.addRow(c,d,b)}akeebabackup.Extradirs.addNewRecordButton(b)},akeebabackup.Extradirs.addRow=function(a,b,c){var d=document.createElement("tr");d.className="ak_filter_row",d.dataset.rootuuid=a,d.dataset.def=JSON.stringify(b);var e=document.createElement("td"),f=document.createElement("td"),g=document.createElement("td"),h=document.createElement("td");e.style.width="4em",f.style.width="7em";var i=document.createElement("span");i.className="ak_filter_tab_icon_container btn btn-danger btn-sm delete me-2",i.addEventListener("click",function(){var a={uuid:this.parentNode.parentNode.dataset.rootuuid,verb:"remove"};akeebabackup.Fsfilters.toggle(a,this,function(a,b){if(!0==a.success){var c=b.parentNode.parentNode;c.parentNode.removeChild(c)}})}),i.insertAdjacentHTML("beforeend","<span class=\"fa fa-trash deletebutton ak-toggle-button\"></span>"),e.appendChild(i);var j=document.createElement("span");j.className="ak_filter_tab_icon_container btn btn-primary btn-sm me-2",j.addEventListener("click",function(){var a,b=this.parentNode.parentNode;this.style.display="none",b.querySelector("span.delete").style.display="none";var d=this.parentNode,e=d.parentNode,f=document.createElement("span");f.className="ak_filter_tab_icon_container btn btn-primary btn-sm save ak-toggle-button ak-stacked-button me-2",f.insertAdjacentHTML("beforeend","<span class=\"fa fa-check-circle\"></span>"),f.addEventListener("click",function(){var a,d=this,e=b.querySelector("input.folder_editor").value;e=e.trim();var f=b.querySelector("input.virtual_editor").value;f=f.trim(),f.length||(f=Math.uuid(8)+"-"+e.split(/[\\/]/).pop());var g=JSON.parse(null!==(a=b.dataset.def)&&void 0!==a?a:"{}");if(!(""==e)){var h={uuid:b.dataset.rootuuid,root:e,data:f,verb:"set"};akeebabackup.Fsfilters.toggle(h,d,function(a,d){if(!0==a.success){if(""==g[0]){var h=d.parentNode.querySelector("span.editbutton");h.classList.remove("fa-plus-square"),h.classList.add("fa","fa-edit","ak-toggle-button"),akeebabackup.Extradirs.addNewRecordButton(c)}var i=[e,f];b.dataset.def=JSON.stringify(i),b.querySelector("span.ak_directory").textContent=e,b.querySelector("span.ak_virtual").textContent=f,d.parentNode.querySelector("span.ak_filter_tab_icon_container").style.display="inline-block";var j=d.parentNode.querySelector("span.cancel");j.parentNode.removeChild(j),b.querySelector("span.delete").style.display="inline-block",d.parentNode.removeChild(d),j=b.querySelector("input.folder_editor"),j.parentNode.removeChild(j),j=b.querySelector("input.virtual_editor"),j.parentNode.removeChild(j),j=b.querySelector("button.browse"),j.parentNode.removeChild(j),b.querySelector("span.ak_directory").style.display="inline-block",b.querySelector("span.ak_virtual").style.display="inline-block"}},!1)}else if(""==g[0])akeebabackup.System.triggerEvent(d.parentNode.querySelector("span.cancel"),"click");else{var i=b.querySelector("span.delete");i.style.display="inline-block",akeebabackup.System.triggerEvent(i,"click")}}),d.appendChild(f);var g=document.createElement("span");g.className="ak_filter_tab_icon_container btn btn-warning btn-sm cancel ak-toggle-button",g.insertAdjacentHTML("beforeend","<span class=\"fa fa-times-circle \"></span>"),g.addEventListener("click",function(){var a,c=this;c.parentNode.querySelector("span.ak_filter_tab_icon_container").style.display="inline-block";var d=c.parentNode.querySelector("span.save");d.parentNode.removeChild(d),c.parentNode.removeChild(c),d=b.querySelector("input.folder_editor"),d.parentNode.removeChild(d),d=b.querySelector("input.virtual_editor"),d.parentNode.removeChild(d),d=b.querySelector("button.browse"),d.parentNode.removeChild(d),b.querySelector("span.ak_directory").style.display="inline-block",b.querySelector("span.ak_virtual").style.display="inline-block";var e=JSON.parse(null!==(a=b.dataset.def)&&void 0!==a?a:"{}");""!=e[0]&&(b.querySelector("span.delete").style.display="inline-block")}),d.appendChild(g);var h=JSON.parse(null!==(a=b.dataset.def)&&void 0!==a?a:"{}"),i=e.querySelector("td.ak_filter_item"),j=i.nextElementSibling,k=document.createElement("input");k.setAttribute("type","text"),k.className="folder_editor form-control",k.value=h[0];var l=document.createElement("button");l.setAttribute("type","button"),l.className="ak_filter_tab_icon_container btn btn-dark btn-sm browse ak-toggle-button",l.insertAdjacentHTML("beforeend","<span class=\"fa fa-folder-open\"></span>"),l.addEventListener("click",function(){var a=this,b=a.parentNode.querySelector("input.folder_editor"),c=b.value.trim();""==c&&(c="[ROOTPARENT]"),akeebabackup.Configuration.onBrowser(c,b)});var m=document.createElement("div");m.className="input-group",m.appendChild(k),m.appendChild(l),i.appendChild(m);var n=document.createElement("input");n.setAttribute("type","text"),n.className="virtual_editor form-control",n.value=h[1],j.appendChild(n),i.querySelector("span.ak_directory").style.display="none",j.querySelector("span.ak_virtual").style.display="none"}),j.insertAdjacentHTML("beforeend","<span class=\"fa fa-edit editbutton ak-toggle-button\"></span>"),f.appendChild(j),g.className="ak_filter_item";var k=document.createElement("span");k.className="ak_filter_name ak_directory",k.textContent=b[0],g.appendChild(k),h.className="ak_filter_item";var l=document.createElement("span");l.className="ak_filter_name ak_virtual",l.textContent=b[1],h.appendChild(l),d.appendChild(e),d.appendChild(f),d.appendChild(g),d.appendChild(h),c.appendChild(d)},akeebabackup.Extradirs.addNewRecordButton=function(a){var b=Math.uuid();akeebabackup.Extradirs.addRow(b,["",""],a);var c=document.getElementById("ak_list_contents").children,d=c[c.length-1],e=d.querySelectorAll("td");e[0].querySelector("span").style.display="none";var f=e[1].querySelectorAll("span"),g=f[f.length-1];g.classList.remove("fa-edit"),g.classList.add("fa-plus-square","ak-toggle-button")},akeebabackup.System.documentReady(function(){var a=Joomla.getOptions("akeebabackup.Includefolders.guiData",null);null===a||(akeebabackup.Configuration.initialisePopovers(),akeebabackup.Extradirs.render(a))});
//# sourceMappingURL=IncludeFolders.min.js.map