"use strict";if("undefined"==typeof akeebabackup)var akeebabackup={};"undefined"==typeof akeebabackup.Configuration&&(akeebabackup.Configuration={GUI:{renderOptionLabel:function renderOptionLabel(e,t,n){if("hidden"!==t.type&&"none"!==t.type){var o=document.createElement("label");o.className="col-sm-3 col-form-label",o.setAttribute("for",e),o.innerHTML=t.title,t.description&&(o.setAttribute("rel","popover"),o.setAttribute("title",t.title),o.setAttribute("data-bs-content",t.description)),t.bold&&(o.className+=" fw-bold"),n.appendChild(o)}},renderOptionTypeNone:function renderOptionTypeNone(){},renderOptionTypeHidden:function renderOptionTypeHidden(e,t,n,o,i){var a=document.createElement("input");a.id=e,a.setAttribute("type","hidden"),a.setAttribute("name",e),a.value=t["default"],i.appendChild(a)},renderOptionTypeSeparator:function renderOptionTypeSeparator(e,t,n,o,i){var a=document.createElement("div");i.appendChild(a)},renderOptionTypeInstaller:function renderOptionTypeInstaller(e,t,n,o){var i=document.createElement("select");for(var a in i.className="form-select akeeba-configuration-select-installer",i.id=e,i.setAttribute("name",e),akeebabackup.Configuration.installers)if(akeebabackup.Configuration.installers.hasOwnProperty(a)){var r=akeebabackup.Configuration.installers[a],s=document.createElement("option");s.value=a,s.innerHTML=r.name,t["default"]===a&&s.setAttribute("selected",1),i.appendChild(s)}n.appendChild(i),o.appendChild(n)},renderOptionTypeEngine:function renderOptionTypeEngine(e,t,n,o){var a=t.subtype;if(null!=akeebabackup.Configuration.engines[a]){var r=e.substr(4,e.length-5),s=document.createElement("div");s.id=r+"_config",s.className="akeeba-engine-options";var d=document.createElement("select");d.className="form-select",d.id=e,d.setAttribute("name",e);var l=akeebabackup.Configuration.engines[a];for(var p in l)if(l.hasOwnProperty(p)){var u=l[p],c=document.createElement("option");c.value=p,c.innerHTML=u.information.title,t["default"]==p&&c.setAttribute("selected","selected"),d.appendChild(c)}akeebabackup.System.addEventListener(d,"change",function(){for(var e={},t=[document.getElementById(r+"_config").querySelectorAll("input"),document.getElementById(r+"_config").querySelectorAll("select")],n=null,o=null,l=null,p=0;p<t.length;p++)if(n=t[p],!!n.length)for(v=0;v<n.length;v++)o=n[v],l=o.id,e[l]=o.value,"checkbox"===o.getAttribute("type")||"radio"===o.getAttribute("type")?e[l]=o.checked:"select"===o.getAttribute("type")&&(e[l]=o.options[o.selectedIndex].value);var u=d.value,c=akeebabackup.Configuration.engines[a][u],g=c.information.title,m={};m[g]=c.parameters,akeebabackup.Configuration.parseGuiData(m,s);var f=s.querySelector("div.card-body");for(f instanceof Element&&f.insertAdjacentHTML("afterbegin","<p class=\"alert alert-info\">"+c.information.description+"</p>"),t=[document.getElementById(r+"_config").querySelectorAll("input"),document.getElementById(r+"_config").querySelectorAll("select")],p=0;p<t.length;p++)if(n=t[p],!!n.length)for(var v=0;v<n.length;v++){o=n[v],l=o.id;var y=e[l];null!=y&&("checkbox"===o.getAttribute("type")||"radio"===o.getAttribute("type")?y?o.setAttribute("checked","checked"):o.removeAttribute("checked"):o.value=y,1===p&&akeebabackup.System.triggerEvent(o,"change"))}akeebabackup.Configuration.initialisePopovers(),"undefined"!=typeof c.information.activation_callback&&window[c.information.activation_callback](c.parameters)});var g=document.createElement("button");g.className="btn btn-secondary btn-sm";var m=document.createElement("span");m.className="fa fa-wrench",g.appendChild(m);var f=document.createElement("span");f.innerHTML=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_UI_CONFIG"),g.appendChild(f),akeebabackup.System.addEventListener(g,"click",function(t){t.preventDefault();var e=new bootstrap.Collapse(s);e.toggle()});var v=document.createElement("div");v.className="input-group",v.appendChild(d),n.appendChild(v),n.appendChild(s),o.appendChild(n),akeebabackup.System.triggerEvent(d,"change")}},renderOptionTypeBrowsedir:function renderOptionTypeBrowsedir(e,t,n,o){var i=document.createElement("input");i.className="form-control",i.setAttribute("type","text"),i.setAttribute("name",e),i.setAttribute("size","30"),i.id=e,i.value=t["default"];var a=document.createElement("button");a.className="btn btn-secondary",a.setAttribute("title",Joomla.Text._("COM_AKEEBABACKUP_CONFIG_UI_BROWSE"));var r=document.createElement("span");r.className="fa fa-folder-open",a.appendChild(r),akeebabackup.System.addEventListener(a,"click",function(t){return t.preventDefault(),null!=akeebabackup.Configuration.onBrowser&&akeebabackup.Configuration.onBrowser(i.value,i),!1});var s=document.createElement("div");s.className="input-group",s.appendChild(i),s.appendChild(a),n.appendChild(s),o.appendChild(n)},renderOptionTypeEnum:function renderOptionTypeEnum(e,t,n,o){var i=document.createElement("select");i.className="form-select akeeba-configuration-select-enum",i.id=e,i.setAttribute("name",e);for(var a=t.enumvalues.split("|"),r=t.enumkeys.split("|"),s=0;s<a.length;s++){var d=a[s],l=r[s],p=document.createElement("option");p.value=d,p.innerHTML=l,d===t["default"]&&p.setAttribute("selected","selected"),i.appendChild(p)}"undefined"!=typeof t.onchange&&akeebabackup.System.addEventListener(i,"change",function(){var e=t.onchange;e(i)}),n.appendChild(i),o.appendChild(n)},renderOptionTypeString:function renderOptionTypeString(e,t,n,o){var i=document.createElement("input");i.className="form-control akeeba-configuration-string",i.setAttribute("type","text"),i.id=e,i.setAttribute("name",e),i.value=t["default"],n.appendChild(i),o.appendChild(n)},renderOptionTypePassword:function renderOptionTypePassword(e,t,n,o){akeebabackup.Configuration.passwordFields[e]=t["default"];var i=document.createElement("input");i.className="form-control akeeba-configuration-password",i.setAttribute("type","password"),i.id=e,i.setAttribute("name",e),i.setAttribute("size",40),i.value=t["default"],i.setAttribute("autocomplete","off"),n.appendChild(i),o.appendChild(n)},renderOptionTypeInteger:function renderOptionTypeInteger(e,t,n,o){var i=e.substr(4,e.length-5),a=document.createElement("input");a.id=i,a.setAttribute("name",e),a.setAttribute("type","hidden"),a.value=t["default"];var r=t.min/t.scale,s=t.max/t.scale,d=1/t.scale;1<t.scale?(r=r.toFixed(2),s=s.toFixed(2),d=d.toFixed(2)):(r=Math.trunc(r),s=Math.trunc(s),d=Math.trunc(d));var l=document.createElement("input");l.className="form-control",l.setAttribute("type","number"),l.id=i+"_custom",l.style.display="none",l.setAttribute("min",r),l.setAttribute("max",s),l.setAttribute("step",d),akeebabackup.System.addEventListener(l,"blur",function(){var e=parseFloat(l.value);e*=t.scale,e<t.min?e=t.min:e>t.max&&(e=t.max),a.value=e;var n=e/t.scale;l.value=1<t.scale?n.toFixed(2):Math.trunc(n)});var p=document.createElement("select");p.id=i+"_dropdown",p.setAttribute("name",i+"_dropdown"),p.className="form-select";for(var u=t.shortcuts.split("|"),c=t.scale,g=!1,m=0;m<u.length;m++){var f=u[m],v=f/c,y=document.createElement("option");y.value=f,y.innerHTML=1<c?v.toFixed(2):Math.trunc(v),f==t["default"]&&(y.setAttribute("selected","selected"),g=!0),p.appendChild(y)}var b=document.createElement("option");b.value=-1,b.innerHTML=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_UI_CUSTOM"),g||(b.setAttribute("selected","selected"),l.value=(t["default"]/t.scale).toFixed(2),l.style.display="block"),p.appendChild(b),akeebabackup.System.addEventListener(p,"change",function(){var e=p.value;return"-1"===e?(l.value=(t["default"]/t.scale).toFixed(2),l.style.display="block",void akeebabackup.System.triggerEvent(l,"focus")):void(a.value=e,l.style.display="none")});var C=document.createElement("div");C.className="input-group";var h=t.uom;if(C.appendChild(p),C.appendChild(l),"string"==typeof h&&0!==h.length){var _=document.createElement("span");_.className="input-group-text",_.textContent=h,C.appendChild(_)}n.appendChild(C),n.appendChild(a),o.appendChild(n)},renderOptionTypeBool:function renderOptionTypeBool(e,t,n,o){var i=e.match(/[a-z0-9]/ig).join(""),a=document.createElement("div");a.className="btn-group",a.setAttribute("role","group");var r=document.createElement("input");r.type="radio",r.className="btn-check",r.name=e,r.setAttribute("autocomplete","off"),r.id=i+"_1",r.value="1";var s=document.createElement("label");s.className="btn btn-outline-success",s.setAttribute("for",i+"_1"),s.innerText=Joomla.Text._("JYES");var d=document.createElement("input");d.type="radio",d.className="btn-check",d.name=e,d.setAttribute("autocomplete","off"),d.id=i+"_0",d.value=0;var l=document.createElement("label");l.className="btn btn-outline-danger",l.setAttribute("for",i+"_0"),l.innerText=Joomla.Text._("JNO"),0==t["default"]?d.setAttribute("checked","checked"):r.setAttribute("checked","checked"),a.appendChild(r),a.appendChild(s),a.appendChild(d),a.appendChild(l),n.appendChild(a),o.appendChild(n)},renderOptionTypeButton:function renderOptionTypeButton(e,t,n,o){var i=o.querySelector("label"),a=t.hook,r=i.innerHTML,s=document.createElement("button");s.id=e,s.innerHTML=r,s.className="btn btn-secondary",i.innerHTML="&nbsp;",akeebabackup.System.addEventListener(s,"click",function(t){t.preventDefault();try{window[a]()}catch(e){}}),n.appendChild(s),o.appendChild(n)},renderOptionTypeUnknown:function renderOptionTypeUnknown(e,t,n,o){var i=e.substr(4,e.length-5),a="akeeba_render_"+t.type,r=window[a];if("function"==typeof r)r(i,t,label,o);else try{window[a](i,t,label,o)}catch(t){}}},engines:{},installers:{},URLs:{},FtpTest:{testConnection:function testConnection(e,t,n){var o=document.getElementById("var["+e+"]");if(akeebabackup.Configuration.FtpTest.buttonKey="var["+e+"]",null===o&&(o=document.getElementById(e),akeebabackup.Configuration.FtpTest.buttonKey=e),null===o)return void console.warn("Button "+akeebabackup.Configuration.FtpTest.buttonKey+" not found");o.setAttribute("disabled","disabled");var i={};try{i={isCurl:n?1:0,host:document.getElementById("var["+t+".host]").value,port:document.getElementById("var["+t+".port]").value,user:document.getElementById("var["+t+".user]").value,pass:document.getElementById("var["+t+".pass]").value,initdir:document.getElementById("var["+t+".initial_directory]").value,usessl:document.querySelector("input[name=\""+("var["+t+".ftps]")+"\"]:checked").value,passive:document.querySelector("input[name=\""+("var["+t+".passive_mode]")+"\"]:checked").value,passive_mode_workaround:0}}catch(o){i={isCurl:n?1:0,host:document.getElementById(t+"_host").value,port:document.getElementById(t+"_port").value,user:document.getElementById(t+"_user").value,pass:document.getElementById(t+"_pass").value,initdir:document.getElementById(t+"_initial_directory").value,usessl:document.getElementById(t+"_ftps").checked,passive:document.getElementById(t+"_passive_mode").checked,passive_mode_workaround:0}}if(n)try{i.passive_mode_workaround=document.querySelector("input[name=\"var["+t+".passive_mode_workaround]\"]:checked").value}catch(n){i.passive_mode_workaround=document.getElementById(t+"_passive_mode_workaround").checked}akeebabackup.System.params.AjaxURL=akeebabackup.Configuration.URLs.testFtp,akeebabackup.System.doAjax(i,function(e){var t=document.getElementById(akeebabackup.Configuration.FtpTest.buttonKey);t.removeAttribute("disabled");var n=document.getElementById("testFtpDialogBodyOk"),o=document.getElementById("testFtpDialogBodyFail"),i=document.getElementById("testFtpDialogLabel");n.style.display="none",o.style.display="none",!0===e?(i.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTFTP_TEST_OK"),n.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTFTP_TEST_OK"),n.style.display="block",o.style.display="none"):(i.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTFTP_TEST_FAIL"),o.textContent=e,n.style.display="none",o.style.display="block");var a=new bootstrap.Modal(document.getElementById("testFtpDialog"),{keyboard:!0,backdrop:!0});a.show()},null,!1,15e3)}},SftpTest:{testConnection:function testConnection(e,t,n){var o=document.getElementById("var["+e+"]");akeebabackup.Configuration.SftpTest.buttonKey="var["+e+"]",o.setAttribute("disabled","disabled");var i={isCurl:n?1:0,host:document.getElementById("var["+t+".host]").value,port:document.getElementById("var["+t+".port]").value,user:document.getElementById("var["+t+".user]").value,pass:document.getElementById("var["+t+".pass]").value,initdir:document.getElementById("var["+t+".initial_directory]").value,privkey:document.getElementById("var["+t+".privkey]").value,pubkey:document.getElementById("var["+t+".pubkey]").value};akeebabackup.System.params.AjaxURL=akeebabackup.Configuration.URLs.testSftp,akeebabackup.System.doAjax(i,function(e){var t=document.getElementById(akeebabackup.Configuration.SftpTest.buttonKey);t.removeAttribute("disabled");var n=document.getElementById("testFtpDialogBodyOk"),o=document.getElementById("testFtpDialogBodyFail"),i=document.getElementById("testFtpDialogLabel");n.style.display="none",o.style.display="none",!0===e?(i.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTSFTP_TEST_OK"),n.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTSFTP_TEST_OK"),n.style.display="block",o.style.display="none"):(i.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTSFTP_TEST_FAIL"),o.textContent=e,n.style.display="none",o.style.display="block");var a=new bootstrap.Modal(document.getElementById("testFtpDialog"),{keyboard:!0,backdrop:!0});a.show()},null,!1,15e3)}},FtpModal:null,passwordFields:{},fsBrowser:{params:{dialogId:"folderBrowserDialog",dialogBodyId:"folderBrowserDialogBody"},modalObject:null},parseConfigData:function parseConfigData(e){akeebabackup.Configuration.engines=e.engines,akeebabackup.Configuration.installers=e.installers,akeebabackup.Configuration.parseGuiData(e.gui)},restoreDefaultPasswords:function restoreDefaultPasswords(){for(var e in akeebabackup.Configuration.passwordFields)if(akeebabackup.Configuration.passwordFields.hasOwnProperty(e)){var t=akeebabackup.Configuration.passwordFields[e],n=document.getElementById(e);n&&(n.value="WORKAROUND FOR NAUGHTY BROWSERS",n.value=t)}},onBrowser:function onBrowser(e,t){akeebabackup.Configuration.onBrowserCallback=function(e){t.value=e,"object"==typeof akeebabackup.Configuration.fsBrowser.modalObject&&akeebabackup.Configuration.fsBrowser.modalObject.close?akeebabackup.Configuration.fsBrowser.modalObject.close():"object"==typeof akeebabackup.Configuration.fsBrowser.modalObject&&akeebabackup.Configuration.fsBrowser.modalObject.hide&&akeebabackup.Configuration.fsBrowser.modalObject.hide()};var n=akeebabackup.Configuration.URLs.browser+encodeURIComponent(e),o=document.getElementById(akeebabackup.Configuration.fsBrowser.params.dialogBodyId);o.innerHTML="";var i=document.createElement("iframe");i.setAttribute("src",n),i.setAttribute("width","100%"),i.setAttribute("height",400),i.setAttribute("frameborder",0),i.setAttribute("allowtransparency","true"),o.appendChild(i),akeebabackup.Configuration.fsBrowser.modalObject=new bootstrap.Modal(document.getElementById(akeebabackup.Configuration.fsBrowser.params.dialogId),{keyboard:!1,backdrop:"static"}),akeebabackup.Configuration.fsBrowser.modalObject.show()},parseGuiData:function parseGuiData(e,t){null==t&&(t=document.getElementById("akeebagui")),t.innerHTML="";var n=0;for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];if(n++,!!i){var a=document.createElement("div");a.className="card mt-3 rounded-top",t.appendChild(a);var r=document.createElement("h3");r.className="card-header",r.innerHTML=o,r.id="auigrp_"+t.id+"_"+n,a.appendChild(r);var s=document.createElement("div");for(var d in s.className="card-body",a.appendChild(s),i){var l;if(i.hasOwnProperty(d)){var p=i[d],u="var["+d+"]",c=null!==(l=p.showon)&&void 0!==l?l:null,g=document.createElement("div");g.className="row mb-3",g.id="akconfigrow."+d,c&&(g.dataset.showon=JSON.stringify(c)),"hidden"!=p.type&&"none"!=p.type&&s.appendChild(g),akeebabackup.Configuration.GUI.renderOptionLabel(u,p,g);var m=document.createElement("div");m.className="col-sm-9";var f=p.type[0].toUpperCase()+p.type.slice(1),v="renderOptionType"+f;"function"==typeof akeebabackup.Configuration.GUI[v]?akeebabackup.Configuration.GUI[v](u,p,m,g,s):akeebabackup.Configuration.GUI.renderOptionTypeUnknown(u,p,m,g,s)}}}}Joomla.Showon.initialise(t)},onChangeScriptType:function onChangeScriptType(e){for(var t,n=e.options[e.selectedIndex].value,o="joomla"===n?"angie":"angie-"+n,a=document.getElementById("var[akeeba.advanced.embedded_installer]"),r=a.children,s=0;s<r.length;s++)if(t=r[s],t.value===o)return void(a.value=o)},initialisePopovers:function initialisePopovers(){var e=Joomla.getOptions("bootstrap.popover");"object"!=typeof e||null===e||Object.keys(e).forEach(function(t){var n=e[t],o={animation:!n.animation||n.animation,container:!!n.container&&n.container,delay:n.delay?n.delay:0,html:!!n.html&&n.html,placement:n.placement?n.placement:"top",selector:!!n.selector&&n.selector,trigger:n.trigger?n.trigger:"click",offset:n.offset?n.offset:0,fallbackPlacement:n.fallbackPlacement?n.fallbackPlacement:"flip",boundary:n.boundary?n.boundary:"scrollParent",customClass:n.customClass?n.customClass:"",sanitize:!n.sanitize||n.sanitize,sanitizeFn:n.sanitizeFn?n.sanitizeFn:null,popperConfig:n.popperConfig?n.popperConfig:null};n.template&&(o.template=n.template),n.allowList&&(o.allowList=n.allowList);var i=Array.from(document.querySelectorAll(t));i.length&&i.map(function(e){new window.bootstrap.Popover(e,o)})})}});function directftp_test_connection(){akeebabackup.Configuration.FtpTest.testConnection("engine.archiver.directftp.ftp_test","engine.archiver.directftp",0)}function postprocftp_test_connection(){akeebabackup.Configuration.FtpTest.testConnection("engine.postproc.ftp.ftp_test","engine.postproc.ftp",0)}function directftpcurl_test_connection(){akeebabackup.Configuration.FtpTest.testConnection("engine.archiver.directftpcurl.ftp_test","engine.archiver.directftpcurl",1)}function postprocftpcurl_test_connection(){akeebabackup.Configuration.FtpTest.testConnection("engine.postproc.ftpcurl.ftp_test","engine.postproc.ftpcurl",1)}function directsftp_test_connection(){akeebabackup.Configuration.SftpTest.testConnection("engine.archiver.directsftp.sftp_test","engine.archiver.directsftp",0)}function postprocsftp_test_connection(){akeebabackup.Configuration.SftpTest.testConnection("engine.postproc.sftp.sftp_test","engine.postproc.sftp",0)}function directsftpcurl_test_connection(){akeebabackup.Configuration.SftpTest.testConnection("engine.archiver.directsftpcurl.sftp_test","engine.archiver.directsftpcurl",1)}function postprocsftpcurl_test_connection(){akeebabackup.Configuration.SftpTest.testConnection("engine.postproc.sftpcurl.sftp_test","engine.postproc.sftpcurl",1)}function akconfig_dropbox_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=dropbox","akeeba_dropbox_window","width=1010,height=500,opener")}function akconfig_dropbox_gettoken(){akeebabackup.System.AjaxURL=akeebabackup.Configuration.URLs.dpecustomapi;akeebabackup.System.doAjax({engine:"dropbox",method:"getauth"},function(e){""==e.error?(document.getElementById("var[engine.postproc.dropbox.token]").value=e.token.oauth_token,document.getElementById("var[engine.postproc.dropbox.token_secret]").value=e.token.oauth_token_secret,document.getElementById("var[engine.postproc.dropbox.uid]").value=e.token.uid,alert("Authentication successful!")):alert("ERROR: Could not complete authentication; please retry")},function(e){alert("ERROR: Could not complete authentication; please retry\n"+e)},!1,15e3)}function akconfig_dropbox2_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=dropbox2","akeeba_dropbox2_window","width=1010,height=500,opener")}function akeeba_dropbox2_oauth_callback(e){document.getElementById("var[engine.postproc.dropbox2.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.dropbox2.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_dropbox2_window");t.close()}function akconfig_onedrive_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=onedrive","akeeba_onedrive_window","width=1010,height=500,opener")}function akeeba_onedrive_oauth_callback(e){document.getElementById("var[engine.postproc.onedrive.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.onedrive.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_onedrive_window");t.close()}function akconfig_onedrivebusiness_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=onedrivebusiness","akeeba_onedrivebusiness_window","width=1010,height=500,opener")}function akeeba_onedrivebusiness_oauth_callback(e){document.getElementById("var[engine.postproc.onedrivebusiness.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.onedrivebusiness.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_onedrivebusiness_window");t.close()}function akeeba_onedrivebusiness_refreshdrives(e){if("onedrivebusiness"===document.getElementById("var[akeeba.advanced.postproc_engine]").value){e=e||{},console.log(e),"undefined"==typeof e["engine.postproc.onedrivebusiness.drive"]&&(e["engine.postproc.onedrivebusiness.drive"]={default:document.getElementById("var[engine.postproc.googledrive.team_drive]").value}),akeebabackup.System.AjaxURL=akeebabackup.Configuration.URLs.dpecustomapi;var t={engine:"onedrivebusiness",method:"getDrives",params:{"engine.postproc.onedrivebusiness.access_token":document.getElementById("var[engine.postproc.googledrive.access_token]").value,"engine.postproc.onedrivebusiness.refresh_token":document.getElementById("var[engine.postproc.googledrive.refresh_token]").value}};akeebabackup.System.doAjax(t,function(t){if(0===t.length)alert("ERROR: Could not retrieve list of OneDrive Drives.");else{var n=document.getElementById("var[engine.postproc.onedrivebusiness.drive]");n.innerHTML="";for(var o,a=0;a<t.length;a++)o=document.createElement("option"),o.value=t[a][0],o.text=t[a][1],e["engine.postproc.onedrivebusiness.drive"]["default"]===o.value&&(o.selected=!0),n.appendChild(o)}},function(e){alert("ERROR: Could not retrieve list of OneDrive Drives. Error: \n"+e)},!1,15e3)}}function akconfig_googledrive_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=googledrive","akeeba_googledrive_window","width=1010,height=500,opener")}function akeeba_googledrive_oauth_callback(e){document.getElementById("var[engine.postproc.googledrive.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.googledrive.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_googledrive_window");t.close(),akeeba_googledrive_refreshdrives()}function akeeba_googledrive_refreshdrives(e){if("googledrive"===document.getElementById("var[akeeba.advanced.postproc_engine]").value){e=e||{},console.log(e),"undefined"==typeof e["engine.postproc.googledrive.team_drive"]&&(e["engine.postproc.googledrive.team_drive"]={default:document.getElementById("var[engine.postproc.googledrive.team_drive]").value}),akeebabackup.System.AjaxURL=akeebabackup.Configuration.URLs.dpecustomapi;var t={engine:"googledrive",method:"getDrives",params:{"engine.postproc.googledrive.access_token":document.getElementById("var[engine.postproc.googledrive.access_token]").value,"engine.postproc.googledrive.refresh_token":document.getElementById("var[engine.postproc.googledrive.refresh_token]").value}};akeebabackup.System.doAjax(t,function(t){if(0===t.length)alert("ERROR: Could not retrieve list of Google Drives.");else{var n=document.getElementById("var[engine.postproc.googledrive.team_drive]");n.innerHTML="";for(var o,a=0;a<t.length;a++)o=document.createElement("option"),o.value=t[a][0],o.text=t[a][1],e["engine.postproc.googledrive.team_drive"]["default"]===o.value&&(o.selected=!0),n.appendChild(o)}},function(e){alert("ERROR: Could not retrieve list of Google Drives. Error: \n"+e)},!1,15e3)}}function akconfig_box_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=box","akeeba_box_window","width=1010,height=500,opener")}function akconfig_box_oauth_callback(e){document.getElementById("var[engine.postproc.box.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.box.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_box_window");t.close()}akeebabackup.System.documentReady(function(){akeebabackup.Configuration.URLs=Joomla.getOptions("akeebabackup.Configuration.URLs",{}),"undefined"!=typeof akeebabackup.Configuration.URLs.dpecustomapi&&(akeebabackup.System.params.AjaxURL=akeebabackup.Configuration.URLs.dpecustomapi);var e=Joomla.getOptions("akeebabackup.Configuration.GUIData",null);null!==e&&setTimeout(function(){setTimeout(akeebabackup.Configuration.restoreDefaultPasswords,1e3),akeebabackup.Configuration.parseConfigData(Joomla.getOptions("akeebabackup.Configuration.GUIData",{})),akeebabackup.Configuration.initialisePopovers(),akeeba_googledrive_refreshdrives(akeebabackup.Configuration.engines.postproc.googledrive.parameters),akeeba_onedrivebusiness_refreshdrives(akeebabackup.Configuration.engines.postproc.onedrivebusiness.parameters)},10)});
//# sourceMappingURL=Configuration.min.js.map