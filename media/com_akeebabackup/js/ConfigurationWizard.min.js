"use strict";if("undefined"==typeof akeebabackup)var akeebabackup={};"undefined"==typeof akeebabackup.Wizard&&(akeebabackup.Wizard={URLs:{},execTimes:[30,25,20,14,7,5,3],blockSizes:[240,200,160,80,40,16,4,2,1],translation:{}}),akeebabackup.Wizard.boot=function(){akeebabackup.Wizard.execTimes=[30,25,20,14,7,5,3],akeebabackup.Wizard.blockSizes=[480,400,240,200,160,80,40,16,4,2,1],document.getElementById("backup-progress-pane").style.display="block",akeebabackup.Backup.resetTimeoutBar(),akeebabackup.System.doAjax({act:"ping"},function(){akeebabackup.Wizard.minExec()},function(){},!1,1e4)},akeebabackup.Wizard.minExec=function(a,b){null==a&&(a=0),null==b&&(b=0),akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(1e3*(2*a+5),100),document.getElementById("backup-substep").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_MINEXECTRY").replace("%s",a.toFixed(1));var c=document.getElementById("step-minexec");c.classList.remove("bg-light"),c.classList.add("bg-primary","text-white"),akeebabackup.System.doAjax({act:"minexec",seconds:a},function(){b++,3>b?akeebabackup.Wizard.minExec(a,b):akeebabackup.Wizard.minExecApply(a)},function(){a+=.5,20<a?(document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTDETERMINEMINEXEC")):akeebabackup.Wizard.minExec(a,0)},!1,1e3*(2*a+5))},akeebabackup.Wizard.minExecApply=function(a){akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(25e3,100),document.getElementById("backup-substep").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_SAVEMINEXEC"),akeebabackup.System.doAjax({act:"applyminexec",minexec:a},function(){var a=document.getElementById("step-minexec");a.classList.remove("bg-primary"),a.classList.add("bg-success"),akeebabackup.Wizard.directories()},function(){document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTSAVEMINEXEC")},!1)},akeebabackup.Wizard.directories=function(){akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(1e4,100),document.getElementById("backup-substep").innerHTML="";var a=document.getElementById("step-directory");a.classList.remove("bg-light"),a.classList.add("bg-primary","text-white"),akeebabackup.System.doAjax({act:"directories"},function(a){if(a){var b=document.getElementById("step-directory");b.classList.remove("bg-primary"),b.classList.add("bg-success"),akeebabackup.Wizard.database()}else document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTFIXDIRECTORIES")},function(){document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTFIXDIRECTORIES")},!1)},akeebabackup.Wizard.database=function(){akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(3e4,50),document.getElementById("backup-substep").innerHTML="";var a=document.getElementById("step-dbopt");a.classList.remove("bg-light"),a.classList.add("bg-primary","text-white"),akeebabackup.System.doAjax({act:"database"},function(a){if(a){var b=document.getElementById("step-dbopt");b.classList.remove("bg-primary"),b.classList.add("bg-success"),akeebabackup.Wizard.maxExec()}else document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTDBOPT")},function(){document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTDBOPT")},!1)},akeebabackup.Wizard.maxExec=function(){var a=akeebabackup.Wizard.execTimes.shift();if(0===akeebabackup.Wizard.execTimes.length||null==a)return document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",void(document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_EXECTOOLOW"));akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(1e3*(1.2*a),80);var b=document.getElementById("step-maxexec");b.classList.remove("bg-light"),b.classList.add("bg-primary","text-white"),document.getElementById("backup-substep").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_MINEXECTRY").replace("%s",a.toFixed(0)),akeebabackup.System.doAjax({act:"maxexec",seconds:a},function(b){b?akeebabackup.Wizard.maxExecApply(a):akeebabackup.Wizard.maxExec()},function(){akeebabackup.Wizard.maxExec()},!1,38e3)},akeebabackup.Wizard.maxExecApply=function(a){akeebabackup.Backup.resetTimeoutBar(),akeebabackup.Backup.startTimeoutBar(1e4,100),document.getElementById("backup-substep").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_SAVINGMAXEXEC"),akeebabackup.System.doAjax({act:"applymaxexec",seconds:a},function(){var a=document.getElementById("step-maxexec");a.classList.remove("bg-primary"),a.classList.add("bg-success"),akeebabackup.Wizard.partSize()},function(){document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTSAVEMAXEXEC")})},akeebabackup.Wizard.partSize=function(){akeebabackup.Backup.resetTimeoutBar();var a=akeebabackup.Wizard.blockSizes.shift();if(0===akeebabackup.Wizard.blockSizes.length||null==a)return document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",void(document.getElementById("backup-error-message").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_CANTDETERMINEPARTSIZE"));akeebabackup.Backup.startTimeoutBar(3e4,100),document.getElementById("backup-substep").textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFWIZ_UI_PARTSIZE").replace("%s",(a/8).toFixed(3));var b=document.getElementById("step-splitsize");b.classList.remove("bg-light"),b.classList.add("bg-primary","text-white"),akeebabackup.System.doAjax({act:"partsize",blocks:a},function(a){if(a){var b=document.getElementById("step-splitsize");b.classList.remove("bg-primary"),b.classList.add("bg-success"),akeebabackup.Wizard.done()}else akeebabackup.Wizard.partSize()},function(){akeebabackup.Wizard.partSize()},!1,6e4)},akeebabackup.Wizard.done=function(){document.getElementById("backup-progress-pane").style.display="none",document.getElementById("backup-complete").style.display="block"},akeebabackup.System.documentReady(function(){akeebabackup.Wizard.boot()});
//# sourceMappingURL=ConfigurationWizard.min.js.map