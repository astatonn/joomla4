"use strict";if("undefined"==typeof akeebabackup)var akeebabackup={};"undefined"==typeof akeebabackup.Regexdbfilters&&(akeebabackup.Regexdbfilters={currentRoot:null}),akeebabackup.Regexdbfilters.activeRootChanged=function(){var a=document.getElementById("active-root");akeebabackup.Regexdbfilters.load(a.options[a.selectedIndex].value)},akeebabackup.Regexdbfilters.load=function(a){var b={action:JSON.stringify({root:a,verb:"list"})};akeebabackup.System.doAjax(b,function(a){akeebabackup.Regexdbfilters.render(a)},null,!1,15e3)},akeebabackup.Regexdbfilters.render=function(a){var b=document.getElementById("ak_list_contents");b.innerHTML="";for(var c,d=0;d<a.length;d++)c=a[d],akeebabackup.Regexdbfilters.addRow(c,b);akeebabackup.Regexdbfilters.addNewRow(b)},akeebabackup.Regexdbfilters.addRow=function(a,b){var c=document.createElement("tr");b.appendChild(c);var d="fa fa-edit";""==a.item&&(d="fa fa-plus-square");var e=document.createElement("td"),f=document.createElement("span"),g=document.createElement("span");f.className="table-icon-container btn btn-primary btn-sm edit ak-toggle-button me-2",f.insertAdjacentHTML("beforeend","<span class=\""+d+"\"></span>"),f.addEventListener("click",function(){var d=["regextables","regextabledata"],e=document.createElement("select");e.setAttribute("name","type"),e.className="type-select form-select";for(var f=0;f<d.length;f++){var g=d[f],h="COM_AKEEBABACKUP_DBFILTER_TYPE_"+(g+"").toUpperCase(),j=Joomla.Text._(h),k=document.createElement("option");k.setAttribute("value",g),k.textContent=j,g==a.type&&k.setAttribute("selected","selected"),e.appendChild(k)}c.querySelector("td.ak-type span").style.display="none",c.querySelector("td.ak-type").appendChild(e);var l=document.createElement("input");l.className="form-control w-100",l.setAttribute("type","text"),l.setAttribute("name","item"),l.value=a.item,c.querySelector("td.ak-item code").style.display="none",c.querySelector("td.ak-item").appendChild(l);var m=c.children[0];m.querySelector("span.edit").style.display="none",m.querySelector("span.delete").style.display="none";var n=document.createElement("span");m.appendChild(n),n.className="table-icon-container btn btn-primary btn-sm save me-2 ak-toggle-button",n.insertAdjacentHTML("beforeend","<span class=\"fa fa-save\"></span>"),n.addEventListener("click",function(){var d=c.children[0];d.querySelector("span.cancel").style.display="none";var f=e.options[e.selectedIndex].value,g=l.value;if(""===g.trim())return""==a.item?void akeebabackup.System.triggerEvent(d.querySelector("span.cancel"),"click"):void akeebabackup.System.triggerEvent(d.querySelector("span.delete"),"click");var h=document.getElementById("active_root"),i={verb:"set",type:f,node:g,root:h.options[h.selectedIndex].value};console.debug(i),akeebabackup.Fsfilters.toggle(i,this,function(){var d=""!=a.item&&""!=a.type&&(a.item!=g||a.type!=f),e=""==a.item||""==a.type,h=c.children[0];if(""==a.item){var j=h.querySelector("span.edit").firstChild;j.className=j.className.replace("fa-plus-square","fa-edit")}i.type=a.type,i.node=a.item,a.type=f,a.item=g;var k="COM_AKEEBABACKUP_DBFILTER_TYPE_"+(a.type+"").toUpperCase();c.querySelector("td.ak-type span").textContent=Joomla.Text._(k),c.querySelector("td.ak-item code").textContent=akeebabackup.System.escapeHTML(a.item),akeebabackup.System.triggerEvent(h.querySelector("span.cancel"),"click"),d?(i.verb="remove",akeebabackup.Fsfilters.toggle(i,this,function(){},!1)):(a.item!=g||a.type!=f||e)&&akeebabackup.Regexdbfilters.addNewRow(b)},!1)});var o=document.createElement("span");m.appendChild(o),o.className="table-icon-container btn btn-warning btn-sm cancel ak-toggle-button",o.insertAdjacentHTML("beforeend","<span class=\"fa fa-times-circle\"></span>"),o.addEventListener("click",function(){var b=c.children[0],d=b.querySelector("span.save");d.parentNode.removeChild(d),d=b.querySelector("span.cancel"),d.parentNode.removeChild(d),b.querySelector("span.edit").style.display="inline-block",""!=a.item&&(b.querySelector("span.delete").style.display="inline-block"),e.parentNode.removeChild(e),c.querySelector("td.ak-type span").style.display="inline-block",l.parentNode.removeChild(l),c.querySelector("td.ak-item code").style.display="inline-block"})}),g.className="table-icon-container btn btn-danger btn-sm delete ak-toggle-button",g.insertAdjacentHTML("beforeend","<span class=\"fa fa-trash\"></span>"),g.addEventListener("click",function(){var d=document.getElementById("active_root"),e={verb:"remove",type:a.type,node:a.item,root:d.options[d.selectedIndex].value};akeebabackup.Fsfilters.toggle(e,this,function(){c.remove(),""==a.item&&akeebabackup.Regexdbfilters.addNewRow(b)},!1)}),e.appendChild(f),e.appendChild(g),c.appendChild(e),""==a.item&&(e.querySelector("span.delete").style.display="none");var h="COM_AKEEBABACKUP_DBFILTER_TYPE_"+(a.type+"").toUpperCase(),i=Joomla.Text._(h);""==a.type&&(i="");var j=document.createElement("td");j.className="ak-type",j.innerHTML="<span>"+i+"</span>",c.appendChild(j);var k=document.createElement("td");k.className="ak-item",k.innerHTML="<code>"+(null==a.item?"":akeebabackup.System.escapeHTML(a.item))+"</code>",c.appendChild(k)},akeebabackup.Regexdbfilters.addNewRow=function(a){akeebabackup.Regexdbfilters.addRow({type:"",item:""},a)},akeebabackup.System.documentReady(function(){document.getElementById("active_root").addEventListener("change",akeebabackup.Regexdbfilters.activeRootChanged),akeebabackup.Regexdbfilters.render(Joomla.getOptions("akeebabackup.Regexdatabasefilters.guiData",{}))});
//# sourceMappingURL=RegExDatabaseFilters.min.js.map