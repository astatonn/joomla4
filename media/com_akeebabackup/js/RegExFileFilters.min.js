"use strict";if("undefined"==typeof akeebabackup)var akeebabackup={};"undefined"==typeof akeebabackup.Regexfsfilters&&(akeebabackup.Regexfsfilters={currentRoot:null}),akeebabackup.Regexfsfilters.activeRootChanged=function(){var a=document.getElementById("active_root");akeebabackup.Regexfsfilters.load(a.options[a.selectedIndex].value)},akeebabackup.Regexfsfilters.load=function(a){var b={action:JSON.stringify({root:a,verb:"list"})};akeebabackup.System.doAjax(b,function(a){akeebabackup.Regexfsfilters.render(a)},null,!1,15e3)},akeebabackup.Regexfsfilters.render=function(a){var b=document.getElementById("ak_list_contents");b.innerHTML="";for(var c,d=0;d<a.length;d++)c=a[d],akeebabackup.Regexfsfilters.addRow(c,b);akeebabackup.Regexfsfilters.addNewRow(b)},akeebabackup.Regexfsfilters.addRow=function(a,b){var c=document.createElement("tr");b.appendChild(c);var d="fa fa-edit";""==a.item&&(d="fa fa-plus-square");var e=document.createElement("td"),f=document.createElement("span"),g=document.createElement("span");e.appendChild(f),e.appendChild(g),c.appendChild(e),f.className="table-icon-container btn btn-primary btn-sm edit ak-toggle-button me-2",f.insertAdjacentHTML("beforeend","<span class=\""+d+"\"></span>"),f.addEventListener("click",function(){var d=["regexfiles","regexdirectories","regexskipdirs","regexskipfiles"],e=document.createElement("select");e.setAttribute("name","type"),e.className="type-select form-select";for(var f=0;f<d.length;f++){var g=d[f],h=!1;g===a.type&&(h=!0);var j=document.createElement("option");h&&j.setAttribute("selected","selected"),j.setAttribute("value",g),j.textContent=Joomla.Text._("COM_AKEEBABACKUP_FILEFILTERS_TYPE_"+(g+"").toUpperCase().substr(5)),e.appendChild(j)}c.querySelector("td.ak-type span").style.display="none",c.querySelector("td.ak-type").appendChild(e);var k=document.createElement("input");k.className="form-control w-100",k.setAttribute("type","text"),k.setAttribute("name","item"),k.value=a.item,c.querySelector("td.ak-item code").style.display="none",c.querySelector("td.ak-item").appendChild(k);var l=c.children[0];l.querySelector("span.edit").style.display="none",l.querySelector("span.delete").style.display="none";var m=document.createElement("span");m.className="table-icon-container btn btn-primary btn-sm save me-2 ak-toggle-button",m.insertAdjacentHTML("beforeend","<span class=\"fa fa-save\"></span>"),m.addEventListener("click",function(){var d=c.children[0];d.querySelector("span.cancel").style.display="none";var f=e.options[e.selectedIndex].value,g=k.value;if(""===g.trim())return""===a.item?void akeebabackup.System.triggerEvent(d.querySelector("span.cancel"),"click"):void akeebabackup.System.triggerEvent(d.querySelector("span.delete"),"click");if(a.item===g&&a.type===f)return void akeebabackup.System.triggerEvent(d.querySelector("span.cancel"),"click");var h=document.getElementById("active_root"),i={verb:"set",type:f,node:g,root:h.options[h.selectedIndex].value};akeebabackup.Fsfilters.toggle(i,this,function(){var d=""!=a.item&&""!=a.type&&(a.item!=g||a.type!=f),e=""==a.item||""==a.type,h=c.children[0];if(""==a.item){var j=h.querySelector("span.edit").firstChild;j.className=j.className.replace("fa-plus-square","fa-edit")}i.type=a.type,i.node=a.item,a.type=f,a.item=g;var k="COM_AKEEBABACKUP_FILEFILTERS_TYPE_"+(a.type+"").toUpperCase().substr(5);c.querySelector("td.ak-type span").textContent=Joomla.Text._(k),c.querySelector("td.ak-item code").textContent=akeebabackup.System.escapeHTML(a.item),akeebabackup.System.triggerEvent(h.querySelector("span.cancel"),"click"),d?(i.verb="remove",akeebabackup.Fsfilters.toggle(i,this,function(){},!1)):(a.item!=g||a.type!=f||e)&&akeebabackup.Regexfsfilters.addNewRow(b)},!1)}),l.appendChild(m);var n=document.createElement("span");n.className="table-icon-container btn btn-warning btn-sm cancel ak-toggle-button",n.insertAdjacentHTML("beforeend","<span class=\"fa fa-times-circle\"></span>"),n.addEventListener("click",function(){var b=c.children[0],d=b.querySelector("span.save");d.parentNode.removeChild(d);var f=b.querySelector("span.cancel");f.parentNode.removeChild(f),b.querySelector("span.edit").style.display="inline-block",""!=a.item&&(b.querySelector("span.delete").style.display="inline-block"),e.parentNode.removeChild(e),c.querySelector("td.ak-type span").style.display="inline-block",k.parentNode.removeChild(k),c.querySelector("td.ak-item code").style.display="inline"}),l.appendChild(n)}),g.className="table-icon-container btn btn-danger btn-sm delete ak-toggle-button",g.insertAdjacentHTML("beforeend","<span class=\"fa fa-trash\"></span>"),g.addEventListener("click",function(){var d=document.getElementById("active_root"),e={verb:"remove",type:a.type,node:a.item,root:d.options[d.selectedIndex].value};akeebabackup.Fsfilters.toggle(e,this,function(){c.parentNode.removeChild(c),""==a.item&&akeebabackup.Regexfsfilters.addNewRow(b)},!1)}),""==a.item&&(e.querySelector("span.delete").style.display="none");var h="COM_AKEEBABACKUP_FILEFILTERS_TYPE_"+(a.type+"").toUpperCase().substr(5),i=Joomla.Text._(h);""==a.type&&(i="");var j=document.createElement("td");j.className="ak-type",j.innerHTML="<span>"+i+"</span>",c.appendChild(j);var k=document.createElement("td");k.className="ak-item",k.innerHTML="<code>"+(null==a.item?"":akeebabackup.System.escapeHTML(a.item))+"</code>",c.appendChild(k)},akeebabackup.Regexfsfilters.addNewRow=function(a){akeebabackup.Regexfsfilters.addRow({type:"",item:""},a)},akeebabackup.System.documentReady(function(){document.getElementById("active_root").addEventListener("change",akeebabackup.Regexfsfilters.activeRootChanged),akeebabackup.Regexfsfilters.render(Joomla.getOptions("akeebabackup.Regexfilefilters.guiData",{}))});
//# sourceMappingURL=RegExFileFilters.min.js.map